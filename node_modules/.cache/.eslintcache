[{"/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/index.tsx":"1","/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/reportWebVitals.ts":"2","/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/App.tsx":"3","/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/styles/global.ts":"4","/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/routes.tsx":"5","/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/hooks/useCart.tsx":"6","/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/components/Header/index.tsx":"7","/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/components/Header/styles.ts":"8","/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/pages/Home/index.tsx":"9","/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/pages/Cart/index.tsx":"10","/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/pages/Home/styles.ts":"11","/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/pages/Cart/styles.ts":"12","/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/services/api.ts":"13","/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/util/format.ts":"14"},{"size":478,"mtime":1636836393147,"results":"15","hashOfConfig":"16"},{"size":425,"mtime":1636836393147,"results":"17","hashOfConfig":"16"},{"size":557,"mtime":1636836393147,"results":"18","hashOfConfig":"16"},{"size":590,"mtime":1636836393147,"results":"19","hashOfConfig":"16"},{"size":318,"mtime":1636836393147,"results":"20","hashOfConfig":"16"},{"size":3493,"mtime":1637017555094,"results":"21","hashOfConfig":"16"},{"size":809,"mtime":1637011124645,"results":"22","hashOfConfig":"16"},{"size":583,"mtime":1636836393147,"results":"23","hashOfConfig":"16"},{"size":1928,"mtime":1637015680827,"results":"24","hashOfConfig":"16"},{"size":3321,"mtime":1637112111730,"results":"25","hashOfConfig":"16"},{"size":1208,"mtime":1636836393147,"results":"26","hashOfConfig":"16"},{"size":1719,"mtime":1636836393147,"results":"27","hashOfConfig":"16"},{"size":102,"mtime":1636836393147,"results":"28","hashOfConfig":"16"},{"size":116,"mtime":1636836393147,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},"pttaw8",{"filePath":"33","messages":"34","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"35","messages":"36","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"37","messages":"38","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"39","messages":"40","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"41","messages":"42","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"43","usedDeprecatedRules":"32"},{"filePath":"44","messages":"45","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"46","messages":"47","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"48","messages":"49","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"50","messages":"51","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"52","messages":"53","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"54","messages":"55","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"56","messages":"57","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"58","messages":"59","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},"/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/index.tsx",[],["60","61"],"/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/reportWebVitals.ts",[],"/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/App.tsx",[],"/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/styles/global.ts",[],"/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/routes.tsx",[],"/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/hooks/useCart.tsx",["62"],"import { createContext, ReactNode, useContext, useState } from 'react';\nimport { toast } from 'react-toastify';\nimport { api } from '../services/api';\nimport { Product, Stock } from '../types';\n\ninterface CartProviderProps {\n  children: ReactNode;\n}\n\ninterface UpdateProductAmount {\n  productId: number;\n  amount: number;\n}\n\ninterface CartContextData {\n  cart: Product[];\n  addProduct: (productId: number) => Promise<void>;\n  removeProduct: (productId: number) => void;\n  updateProductAmount: ({ productId, amount }: UpdateProductAmount) => void;\n}\n\nconst CartContext = createContext<CartContextData>({} as CartContextData);\n\nexport function CartProvider({ children }: CartProviderProps): JSX.Element {\n  const [cart, setCart] = useState<Product[]>(() => {\n    const storagedCart = localStorage.getItem('@RocketShoes:cart');\n\n    if (storagedCart) {\n      return JSON.parse(storagedCart);\n    }\n\n    return [];\n  });\n\n  const addProduct = async (productId: number) => {\n    try {\n      const updatedCart = [...cart];\n      const productExists = updatedCart.find(product => product.id === productId);\n\n      const stock = await api.get(`/stock/${productId}`);\n\n      const stockAmount = stock.data.amount;\n      const currentAmount = productExists ? productExists.amount : 0;\n      const amount = currentAmount + 1;\n      \n      if (amount > stockAmount) {\n        toast.error('Quantidade solicitada fora de estoque');\n        return;\n      }\n\n      if (productExists) {\n        productExists.amount = amount;\n      } else {\n        const product = await api.get(`/products/${productId}`);\n\n        const newProduct = {\n          ...product.data,\n          amount: 1\n        }\n        updatedCart.push(newProduct);\n      }\n\n      setCart(updatedCart);\n      localStorage.setItem('@RocketShoes:cart', JSON.stringify(updatedCart))\n\n\n    } catch {\n      toast.error('Erro na adição do produto');\n    }\n  };\n\n  const removeProduct = (productId: number) => {\n    try {\n      const updatedCart = [...cart];\n      const productIndex = updatedCart.findIndex(product => product.id === productId);\n\n      if (productIndex >=0) {\n        updatedCart.splice(productIndex, 1);\n        setCart(updatedCart);\n\n        localStorage.setItem('@RocketShoes:cart', JSON.stringify(updatedCart))\n      } else {\n        throw Error();\n      }\n    } catch {\n      toast.error('Erro na remoção do produto');\n    }\n  };\n\n  const updateProductAmount = async ({\n    productId,\n    amount,\n  }: UpdateProductAmount) => {\n    try {\n      if (amount <= 0) {\n        return;\n      }\n\n      const stock = await api.get(`/stock/${productId}`);\n\n      const stockAmount = stock.data.amount;\n\n      if (amount > stockAmount) {\n        toast.error('Quantidade solicitada fora de estoque');\n        return;\n      }\n\n      const updatedCart = [...cart];\n      const productExists = updatedCart.find(product => product.id === productId);\n\n      if (productExists) {\n        productExists.amount = amount;\n        setCart(updatedCart);\n        localStorage.setItem('@RocketShoes:cart', JSON.stringify(updatedCart))\n      } else {\n        throw Error();\n      }\n\n    } catch {\n      toast.error('Erro na alteração de quantidade do produto');\n    }\n  };\n\n  return (\n    <CartContext.Provider\n      value={{ cart, addProduct, removeProduct, updateProductAmount }}\n    >\n      {children}\n    </CartContext.Provider>\n  );\n}\n\nexport function useCart(): CartContextData {\n  const context = useContext(CartContext);\n\n  return context;\n}\n","/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/components/Header/index.tsx",[],"/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/components/Header/styles.ts",[],"/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/pages/Home/index.tsx",[],"/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/pages/Cart/index.tsx",[],"/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/pages/Home/styles.ts",[],"/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/pages/Cart/styles.ts",[],"/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/services/api.ts",[],"/home/scdesign/Downloads/RocketSeat/Ignite/reactJS/Desafios/Desafio03_CriandoHook/src/util/format.ts",[],{"ruleId":"63","replacedBy":"64"},{"ruleId":"65","replacedBy":"66"},{"ruleId":"67","severity":1,"message":"68","line":4,"column":19,"nodeType":"69","messageId":"70","endLine":4,"endColumn":24},"no-native-reassign",["71"],"no-negated-in-lhs",["72"],"@typescript-eslint/no-unused-vars","'Stock' is defined but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation"]